.INCLUDE	%CMN:COMMON%
TITLE	PRINT,<PRINT A STRING ON THE TTY>,0A,10-MAY-91,RTW

;
;		COPYRIGHT (c) 1974, 1991 BY
;	DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
;
; THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND  COPIED
; ONLY  IN  ACCORDANCE  WITH  THE  TERMS  OF  SUCH  LICENSE AND WITH THE
; INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE OR  ANY  OTHER
; COPIES  THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY
; OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE  IS  HEREBY
; TRANSFERRED.
;
; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITHOUT  NOTICE
; AND  SHOULD  NOT  BE  CONSTRUED  AS  A COMMITMENT BY DIGITAL EQUIPMENT
; CORPORATION.
;
; DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE  OR  RELIABILITY  OF ITS
; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.
;

.SBTTL	PRINT	- PRINT A STRING ON THE TTY

;+
; LOCAL MACROS
;-
	.MCALL	PUSH,POP
;+
; SET PSECT NAME
;-
	.PSECT	PBSLIB,RO,CON
;+
; PRINT - PRINT A BUFFER ON THE TTY
;
; PIC
;
; INPUTS:
;	R3 =   WRITE MODE
;	R4 =   LENGTH OF BUFFER
;	R5 --> BUFFER LOCATION
;	CALL	PRINT
;
; OUTPUTS:
;	BUFFER WRITTEN ON TTY
;-

PRINT::	PUSH	R0			;SAVE THE WORLD
	;CALLX	CLRXRB			;ZERO THE XRB
	MOV	#XRB,R0			;GET POINTER TO XRB
	MOV	R4,(R0)+		;SET BUFFER LENGTH
	MOV	R4,(R0)+		;SET BUFFER  COUNT
	MOV	R5,(R0)+		;SET BUFFER ADDRESS
	CLR	(R0)+			;SET CHAN=0 AND MSB OF BLCOK#=0
	CLR	(R0)+			;SET LSB OF BLOCK#=0
	CLR	(R0)+			;SKIP
	MOV	R3,(R0)+		;SET MODIFIER
	.WRITE				;DO IT
	POP	R0			;PUT THE WORLD BACK
	RETURN				;AND BACK WE GO

	.END

