TITLE	TERCUI,<TERMGR CUI COMMAND TABLES>,0A,10-MAY-91,JJT/DBM/SEL

;
;		COPYRIGHT (c) 1974, 1991 BY
;	DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
;
; THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND  COPIED
; ONLY  IN  ACCORDANCE  WITH  THE  TERMS  OF  SUCH  LICENSE AND WITH THE
; INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE OR  ANY  OTHER
; COPIES  THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY
; OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE  IS  HEREBY
; TRANSFERRED.
;
; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITHOUT  NOTICE
; AND  SHOULD  NOT  BE  CONSTRUED  AS  A COMMITMENT BY DIGITAL EQUIPMENT
; CORPORATION.
;
; DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE  OR  RELIABILITY  OF ITS
; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.
;

.SBTTL	TERCUI Edit History
;+
; EDIT	BY   	DATE		REASON
;
;  01	JJT	06-Jan-89	Add /ANSWERBACK
;  02	JJT	26-Jan-89	Have /ANSWERBACK conflict with /AUTOBAUD
;  03	JJT	02-Mar-89	Separate /ANSWERBACK and /NOANSWERBACK
;  04	DBM	17-Jul-89	Add /OPERATOR_SERVICES qualifier
;  05	SEL	25-Jul-89	Add /[NO]LINE_EDITING, /INSERT, /OVERSTRIKE
;  06	SEL	27-Jul-89	Add /[NO]OUTPUT
;  07	SEL	31-Aug-89	Add /[NO]RECALL 
;  08	SEL	12-Sep-89	Add /NO prefix to /OPERATOR_SERVICES arguments
;				Allow a list of arguments /OPER=(NOMESS,REQ)
;				Allow /OPER=NONE (equivalent to /NOOPER)
;				Split /OPER and /NOOPER into 2 qualifiers
;  09	SEL	2-Oct-89	Change /OUTPUT argument to LF.N (Filename Req.)
;  10	SEL	01-Feb-90	Change BUFFER_QUOTA range due to 28 char buffers
;  11	SEL	14-Feb-90	Add /PROTOCOL={NONE,DDCMP}
;  12	JJT	23-Aug-90	Change MINVAL of /BUFF to 28.
;-

	.IDENT	"10.00I"

	.PAGE
	.SBTTL	DEFINE AND ORDER THE .PSECTS

		DEFORG	TERCUI


	.PAGE
	.SBTTL	DEFINE QCUI MACROS

		.MCALL	$CUI, $DISALLOW					;002
		$CUI	TABLE				;INCLUDE THE CUI TABLES


	.PAGE
	.SBTTL	DEFINE TERMGR COMMAND TABLE FOR CUI

	CMDTBL::					;COMMAND TABLE ENTRY
		$THR
		$RDCMD PROMPT=CMD.P			;READ TERMGR COMMAND
		$PARKEY					;PARSE THE COMMAND KEYWORD
		$ONKEY SET.K,SETCMD			; SET TERMINAL COMMAND
		$ONKEY SHO.K,SHOCMD			;SHOW TERMINAL COMMAND
		$ENDKEY
		$ENDTHR


	.PAGE
	.SBTTL PROCESS SET TERMINAL [KBn:]

	SETCMD:	$THR
		$DEFCMD QUAL=SETTL,U.CMDC=SET.K		; DEFINE SET TERMINAL
		$PARM KB.T,TYPE=U$DEV,FLAGS=PF.OPT	; GET [KBn[:]]
		$FETCQ	ABD.Q				;/AUTOBAUD SPECIFIED;002
		$IF	PRESENT				; IF PRESENT	    ;002
		$IF	YES				;  IF /AUTOBAUD	    ;002
		$DO							    ;002
		MOV	U.POS(R4),CONFPOS		;SAVE THE POSITION  ;002
		$ENDDO							    ;002
		$DISALLOW	<ANB.Q>,U.CNFE		;DISALLOW /ANSWERBACK;02
		$ENDIF							    ;002
		$ENDIF							    ;002
		$ENDCMD
		$ENDTHR


		.PAGE
		.SBTTL DEFINE SET TERMINAL COMMAND QUALIFIERS

	SETTL:  DEFQUAL PRO.Q,ARG=REQ			; PROTOCOL	;011+
		 DEFARG NON.K				;  =NONE
		 DEFARG DDC.K				;  =DDCMP	
		 ENDARG							;011-
		DEFQUAL	REC.Q,QF.NEG			; [NO]RECALL	;007
		DEFQUAL	LIN.Q,QF.NEG			; [NO]LINE_EDIT	;005+
		DEFQUAL	INS.Q,CONF=OVR.Q		; INSERT
		DEFQUAL	OVR.Q,CONF=INS.Q		; OVERSTRIKE	;005-
		DEFQUAL	ANB.Q,CONF=NAN.Q		; ANSWERBACK	;003
		DEFQUAL	NAN.Q,CONF=ANB.Q		; NOANSWERBACK	;003
		DEFQUAL	NCL.Q,QF.ALIS,ARG=REQ		; NOCONTROL
		 DEFARG CTR.K				; =R KEYWORD
		 DEFARG CTT.K				; =T KEYWORD
		 DEFARG CNC.K				; =C KEYWORD
		 DEFARG CTX.K				; =X KEYWORD
		 ENDARG
		DEFQUAL	CTL.Q,QF.ALIS,ARG=REQ		; CONTROL
		 DEFARG CTR.K				; =R KEYWORD
		 DEFARG CTT.K				; =T KEYWORD
		 DEFARG CNC.K				; =C KEYWORD
		 DEFARG CTX.K				; =X KEYWORD
		 ENDARG
		DEFQUAL	WID.Q,ARG=REQ			; WIDTH=n
		 DEFARG	TYPE=U$U8,MINVAL=1,MAXVAL=254	; INTEGER ARG
		 ENDARG
		DEFQUAL	TAB.Q,QF.NEG			; [NO]TAB
		DEFQUAL	FRM.Q,QF.NEG			; [NO]FORM_FEED
		DEFQUAL	LOW.Q,ARG=OPT			; LOWERCASE[=opt]
		 DEFARG	IN1.K				; INPUT KEYWORD
		 DEFARG OU1.K				; OUTPUT KEYWORD
		 ENDARG
		DEFQUAL	UPP.Q,ARG=OPT			; UPPERCASE[=opt]
		 DEFARG IN2.K				; INPUT KEYWORD
		 DEFARG OU2.K				; OUTPUT KEYWORD
		 ENDARG
		DEFQUAL	HST.Q,QF.NEG			; [NO]HOSTSYNC
		DEFQUAL	RES.Q,ARG=REQ			; RESUME
		 DEFARG	ANY.K				; ANY
		 DEFARG CTC.K				; CTRL_C
		 ENDARG
		DEFQUAL	EKO.Q,QF.NEG			; [NO]LOCAL_ECHO
		DEFQUAL	SCP.Q,CONF=HRD.Q		; SCOPE
		DEFQUAL	HRD.Q,CONF=SCP.Q		; HARDCOPY
		DEFQUAL	FIL.Q,QF.NEG,ARG=OPT		; [NO]CRFILL=n
		 DEFARG	TYPE=U$S8,MINVAL=0,MAXVAL=6	; INTEGER ARG
		 ENDARG
		DEFQUAL	SPD.Q,QF.ALIS,ARG=REQ		; SPEED=(i,o),=n
		 DEFARG	TYPE=U$ANY			; EXTA,EXTB, or n
		 ENDARG
		DEFQUAL	PAR.Q,QF.NEG,ARG=REQ		; [NO]PARITY
		 DEFARG	EVN.K				; EVEN
		 DEFARG ODD.K				; ODD
		 ENDARG
		DEFQUAL	TTS.Q,QF.NEG			; [NO]TTSYNC
		DEFQUAL	UPA.Q,QF.NEG			; [NO]UP_ARROW
		DEFQUAL SUP.Q,ARG=REQ			; SETUP filename
		 DEFARG	TYPE=LF.N			; LOCAL FILE
		 ENDARG
		DEFQUAL ALT.Q,QF.NEG			; [NO]ALT_MODE
		DEFQUAL	ESQ.Q,QF.NEG			; [NO]ESCAPE_SEQUENCE
		DEFQUAL	DLM.Q,QF.NEG,ARG=REQ		; [NO]DELIMITER=x
		 DEFARG	TYPE=U$ANY			; STRING ARG
		 ENDARG
		DEFQUAL	DEF.Q,QF.NEG			; [NO]PERMANENT
		DEFQUAL	INQ.Q				; INQUIRE
		DEFQUAL	BRK.Q,QF.NEG			; [NO]BREAK
		DEFQUAL BRD.Q,QF.NEG			; [NO]BROADCAST
		DEFQUAL DEVT.Q,ARG=REQ,CLASS=TYP.C,CONF=TYP.C ; DEVICE_TYPE=
		 DEFARG TYPE=U$ANY			; STRING ARG
		 ENDARG
		DEFQUAL LA34.Q,CLASS=TYP.C,CONF=TYP.C	; LA34
		DEFQUAL LA36.Q,CLASS=TYP.C,CONF=TYP.C	; LA36
		DEFQUAL LA38.Q,CLASS=TYP.C,CONF=TYP.C	; LA38
		DEFQUAL LA120.Q,CLASS=TYP.C,CONF=TYP.C	; LA120
		DEFQUAL VT52.Q,CLASS=TYP.C,CONF=TYP.C	; VT52
		DEFQUAL VT100.Q,CLASS=TYP.C,CONF=TYP.C	; VT100
		DEFQUAL	BT8.Q,QF.NEG			; [NO]EIGHT_BIT
		DEFQUAL	TYP.Q,ARG=REQ			; TYPE=n
		 DEFARG	TYPE=U$U8,MINVAL=0,MAXVAL=255	; INTEGER ARG
		 ENDARG
		DEFQUAL	ANS.Q,QF.NEG			; [NO]ANSI
		DEFQUAL	AVO.Q,QF.NEG			; [NO]ADVANCED_VIDEO
		DEFQUAL	W132.Q,QF.NEG			; [NO]132_COLUMNS
		DEFQUAL	PPT.Q,QF.NEG			; [NO]PRINTER_PORT
		DEFQUAL	REG.Q,QF.NEG			; [NO]REGIS
		DEFQUAL	SIX.Q,QF.NEG			; [NO]SIXEL
		DEFQUAL	KAN.Q,QF.NEG			; [NO]KATAKANA
		DEFQUAL	SEC.Q,QF.NEG			; [NO]SELECT_ERASE
		DEFQUAL	LOD.Q,QF.NEG			; [NO]LOADABLE_CHARACTERS
		DEFQUAL	UDK.Q,QF.NEG			; [NO]USER_DEFINED_KEYS
		DEFQUAL RTC.Q,QF.NEG			; [NO]RESTRICT
		DEFQUAL MDM.Q,QF.NEG			; [NO]MODEM
		DEFQUAL ABD.Q,QF.NEG			; [NO]AUTOBAUD
		DEFQUAL INT.Q,QF.NEG			; [NO]INTERACTIVE
		DEFQUAL RST.Q				; RESET
		DEFQUAL	BUF.Q,ARG=REQ			; BUFFER_QUOTA
		 DEFARG	TYPE=U$S16,MINVAL=28,MAXVAL=7140 ; # OF CHARS	 ;012
		 ENDARG
		DEFQUAL NOPR.Q,CONF=OPER.Q		; /NOOPERATOR  	 ;008+
		DEFQUAL OPER.Q,QF.ALIS,ARG=OPT,CONF=NOPR.Q ;/OPERATOR
		 DEFARG	ALL.K				;  =ALL
		 DEFARG	NON.K				;  =NONE
		 DEFARG	MESS.K,FLAGS=AF.NEG		;  =[NO]MESSAGES
		 DEFARG	RQST.K,FLAGS=AF.NEG		;  =[NO]REQUESTS ;008-
		 ENDARG
		ENDQUAL					;		 ;004-


		.PAGE
		.SBTTL	PROCESS SHOW TERMINAL COMMAND

	SHOCMD:	$THR
		$DEFCMD QUAL=SHOTL,U.CMDC=SHO.K		; DEFINE SHOW TERMINAL
		$PARM KB.T,TYPE=U$DEV,FLAGS=PF.OPT	; [KBn[:]]
		$ENDCMD
		$ENDTHR

	SHOTL:	DEFQUAL	OUT.Q,QF.NEG,ARG=OPT		; /[NO]OUTPUT 	;006+
		 DEFARG TYPE=LF.N			; FILENAME REQ. ;009
		 ENDARG					;		;006-
		DEFQUAL DEF.Q,QF.NEG			; [NO]PERMANENT
		DEFQUAL	BRF.Q,CONF=FUL.Q		; BRIEF
		DEFQUAL FUL.Q,CONF=BRF.Q		; FULL
		DEFQUAL ALL.Q				; ALL
		ENDQUAL

		.PAGE
		.SBTTL	DEFINE TERMGR PROMPT STRINGS

		CMD.P:	.ASCIC	^\"Termgr> "\		; COMMAND PROMPT


		.PAGE
		.SBTTL	DEFINE GLOBAL CONSTANTS

		GLOBAL	<SET.K,SHO.K,NCL.Q>
		GLOBAL	<CTL.Q,WID.Q,TAB.Q,FRM.Q,LOW.Q,UPP.Q,HST.Q,RES.Q>
		GLOBAL	<EKO.Q,SCP.Q,FIL.Q,SPD.Q,PAR.Q,EVN.K,ODD.K,TTS.Q>
		GLOBAL	<UPA.Q,SUP.Q,ESQ.Q,DLM.Q,ALT.Q,DEF.Q,BRK.Q,BRD.Q>
		GLOBAL	<DEVT.Q,IN1.K,OU1.K,KB.T,ANY.K,CTC.K,BT8.Q,IN2.K>
		GLOBAL	<OU2.K,CTR.K,INQ.Q,HRD.Q,CNC.K,CTT.K,CTX.K,TYP.C>
		GLOBAL	<TYP.Q,LA34.Q,LA36.Q,LA38.Q,LA120.Q,VT52.Q,VT100.Q>
		GLOBAL	<ANS.Q,AVO.Q,W132.Q,PPT.Q,REG.Q,SIX.Q,KAN.Q,SEC.Q>
		GLOBAL	<LOD.Q,UDK.Q,RTC.Q,MDM.Q,ABD.Q,BRF.Q,FUL.Q,INT.Q>
		GLOBAL	<BUF.Q>
		GLOBAL	<U.CNFE,U.POS,CONFPOS>				;002
		GLOBAL	<ALL.K,MESS.K,RQST.K>


		.END
