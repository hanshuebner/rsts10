.IIF	NDF	L$$IST,	.NLIST
.IIF	NDF	L$$IST,	.DSABL	CRF
.NLIST	TTM
.LIST	TOC,MEB,BEX
.DSABL	GBL
.ENABL	REG,LC
.TITLE	COMMON	COMMON DEFINITIONS
.SBTTL
.SBTTL	COMMON	COMMON DEFINITIONS
.SBTTL
.SBTTL	EDIT:		DATE:		BY:
.SBTTL	 08	      23-FEB-82		MHB/ABC/SJK/SHG/MJG/RTW/GPK/MND/BGN
.sbttl
.sbttl
.sbttl              Copyright 1974,1990 by Digital Equipment Corporation
.sbttl                             All rights reserved.
.sbttl
.sbttl     This software is furnished under a license and may be used and copied
.sbttl     only  in  accordance  with  the  terms  of  such license and with the
.sbttl     inclusion of the above copyright notice.  This software or any copies
.sbttl     shall not be provided to any other person.   No title to or ownership
.sbttl     of the software is hereby transferred.
.sbttl
.sbttl     The information in this software is subject to change without notice.
.sbttl
.sbttl     DIGITAL  assumes  no  responsibility  for the  use, functionality, or
.sbttl     reliability of its  software  on equipment  which  is not supplied by
.sbttl     DIGITAL.
.sbttl

.SBTTL	EDIT HISTORY FOR COMMON
;+
;
;  000	RRF  06-MAR-81	CREATION - COPIED FROM V7.0-07
;  001	TG   27-Jun-80	Put Namdir stuff in
;  002	RTW  21-aug-80	Add Handler index for dmp
;  003	TG   20-DEC-80	Changed IDENT for new project
;  004	GPK  16-Feb-81	Added XPEEK and DDCU stuff
;  005	TG   16-Feb-81	Changed IDENT for new project
;  006  GPK  10-Apr-81	Add UU.TB3, add .ENABL REG,LC
;  007  MND  15-Apr-81	Removed comments to Named directories
;  008  BGN  23-Feb-82  Change sysvee to 7.2
;
;-

	.SBTTL

; GENERAL MACROS

.MACRO	UNORG
.ENDM	UNORG

.MACRO	ORG	SECT,OFFSET
.MACRO	UNORG
.LIST	BEX
.CSECT	SECT
.ENDM	UNORG
	TMPORG	SECT,<OFFSET>
.ENDM	ORG

.MACRO	DEFORG	SECT
	ORG	SECT
.DSABL	CRF
.IIF	NE	.-SECT,	.ERROR	;DEFORG NOT AT BEGINNING OF SECT
.GLOBL	SECT
.ENABL	CRF
.SBTTL	DEFINE IN LIBRARY "SECT"
.ENDM	DEFORG

.MACRO	TMPORG	SECT,OFFSET
.LIST	BEX
.CSECT	SECT
.DSABL	CRF
.IF	NDF	SECT
.ENABL	CRF
SECT:
.DSABL	CRF
.ENDC
.ENABL	CRF
.IF	NB	<OFFSET>
.	=	OFFSET+SECT
.ENDC
.ENDM	TMPORG

.MACRO	INCLUDE	LIST
.IRP	SECT,<LIST>
.GLOBL	SECT
.SBTTL	INCLUDE FROM LIBRARY "SECT"
.ENDM
.ENDM	INCLUDE

.MACRO	.DSECT	START,CREF
.IIF	B	<CREF>,	.DSABL	CRF
.IIF	DF	L$$IST,	.DSABL	CRF
.ASECT
.	=	0
.IIF	DF	L$$IST,	.ENABL	CRF
.IIF	B	<CREF>,	.ENABL	CRF
.IF	NB	<START>
.	=	START
.ENDC
.ENDM	.DSECT

.MACRO	.BSECT	START,CREF
.IIF	B	<CREF>,	.DSABL	CRF
.IIF	DF	L$$IST,	.DSABL	CRF
.ASECT
.	=	1
.IF	IDN	<START>,<HIGH>
.	=	400
.ENDC
.IIF	DF	L$$IST,	.ENABL	CRF
.IIF	B	<CREF>,	.ENABL	CRF
.ENDM	.BSECT

.MACRO	.EQUATE	SYMBOL,VALUE,CREF
.IIF	B	<CREF>,	.DSABL	CRF
.IIF	DF	L$$IST,	.DSABL	CRF
.ASECT
.IIF	DF	L$$IST,	.ENABL	CRF
.IIF	B	<CREF>,	.ENABL	CRF
.	=	VALUE
.LIST
SYMBOL:
.NLIST
.IIF	B	<CREF>,	.DSABL	CRF
.IIF	DF	L$$IST,	.DSABL	CRF
	UNORG
.IIF	DF	L$$IST,	.ENABL	CRF
.IIF	B	<CREF>,	.ENABL	CRF
.ENDM	.EQUATE

.MACRO	SWAPR	REG1,REG2
.NTYPE	$$$$$1,REG1
.NTYPE	$$$$$2,REG2
.IIF NE	<$$$$$1!$$$$$2>&70, .ERROR	; ARGUMENTS TO SWAPR MUST BE REGISTERS
	 XOR	REG1,REG2
	 XOR	REG2,REG1
	 XOR	REG1,REG2
.ENDM	SWAPR

.MACRO	.BLKW0	AMT=1,VALUE=0
.NLIST
.REPT	AMT
	.WORD	VALUE
.ENDR
.LIST
.ENDM	.BLKW0

.MACRO	.BLKB0	AMT=1,VALUE=0
.NLIST
.REPT	AMT
	.BYTE	VALUE
.ENDR
.LIST
.ENDM	.BLKB0

.MACRO	GLOBAL	LIST
.GLOBL	LIST
.ENDM	GLOBAL

.MACRO	RETURN	REG=PC
	 RTS	REG
.ENDM	RETURN

.MACRO	JMPX	LABEL
	 JMP	@#LABEL
.DSABL	CRF
.GLOBL	LABEL
.ENABL	CRF
.ENDM	JMPX

.MACRO	CALL	SUBR,REG=PC,LIST
	 JSR	REG,SUBR
.IF	NB	<LIST>
	  .WORD	LIST
.ENDC
.ENDM	CALL

.MACRO	CALLR	SUBR
	 JMP	SUBR
.ENDM	CALLR

.MACRO	CALLX	SUBR,REG=PC,LIST
	CALL	@#SUBR,REG,<LIST>
.DSABL	CRF
.GLOBL	SUBR
.ENABL	CRF
.ENDM	CALLX

.MACRO	CALLRX	SUBR
	CALLR	@#SUBR
.DSABL	CRF
.GLOBL	SUBR
.ENABL	CRF
.ENDM	CALLRX

.MACRO	.ASSUME	ARG1,COND,ARG2
.IF	COND	<ARG1>-<ARG2>
.IFF
.ERROR	ARG1 ;"COND ARG2" FAILS
.ENDC
.ENDM	.ASSUME

.MACRO	.BR	ARG
.IF	NE	.-<ARG>
.ERROR	;ROUTINE "ARG" MISPLACED
.ENDC
.ENDM	.BR

.MACRO	.CALLR	ARG
.IF	NE	.-<ARG>
.ERROR	;SUBROUTINE "ARG" MISPLACED
.ENDC
.ENDM	.CALLR

.MACRO	PUSH	LIST
.IF B	<LIST>
	 CLR	-(SP)
.IFF
.IRP	LOC,<LIST>
	 MOV	LOC,-(SP)
.ENDM	;.IRP
.ENDC	;.IF B <LIST>
.ENDM	PUSH

.MACRO	POP	LIST
.IF B	<LIST>
	 TST	(SP)+
.IFF
.IRP	LOC,<LIST>
	 MOV	 (SP)+,LOC
.ENDM	;.IRP
.ENDC	;.IF B <LIST>
.ENDM	POP

.MACRO	MOVPIC	LBL,LOC
.NTYPE	$$$$$1,LBL
.NTYPE	$$$$$2,LOC
.IF NE	$$$$$1-27
	.ERROR	; LBL IS NOT A LITERAL REFERENCE
.IFF
.IF EQ	$$$$$2-46
	 MOV	PC,LOC
	 ADD	LBL-.,(SP)
.IFF
.IIF NE	$$$$$2&70,	.ERROR	; LOC IS NOT A REGISTER OR -(SP) REFERENCE
	 MOV	PC,LOC
	 ADD	LBL-.,LOC
.ENDC	;$$$$$2-46
.ENDC	;$$$$$1-27
.ENDM	MOVPIC

; SYSTEM LEVEL DEFINITIONS

.EQUATE	SYSVEL,"08,NOCREF ;MAJOR LEVEL
.EQUATE	SYSVEE,".0,NOCREF ;MINOR LEVEL

RT11$$	= -1

.MACRO	TITLE	NAME,DESC,NU,LEDITDATE,EDITORS
.LIST
.TITLE	NAME	DESC
.IDENT	"08.0'NU"
.SBTTL
.SBTTL	NAME	DESC
.SBTTL
.SBTTL	EDIT:		DATE:		BY:
.SBTTL	 NU	      LEDITDATE		EDITORS
.SBTTL
.NLIST
$$$VER	=	<NU'.-<NU'./10.*10.>>*400+<NU'./10.>+"00
.ENDM	TITLE

.IIF	NDF	L$$IST,	.ENABL	CRF
.IIF	NDF	L$$IST,	.LIST

