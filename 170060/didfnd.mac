	$BEGIN	DIDFND,<28.0>,<FIND DEFAULT DIRECTORY ID>
; 
; THIS  SOFTWARE  IS FURNISHED UNDER A LICENSE AND MAY
; BE USED OR COPIED ONLY IN ACCORDANCE WITH THE  TERMS
; OF SUCH LICENSE.
;  
; COPYRIGHT (c) 1981 BY DIGITAL EQUIPMENT CORPORATION.
; ALL RIGHTS RESERVED.
;
;
; SHAO-SUN CHIEN	28-JUN-74
;
;+
; MODIFIED:
;
;	LONI BROWN	24-APR-81
;
;	       LEB001 - ADDED RSTS/E SPECIFIC CODE
;
; THE ONLY DIFFERENCE BETWEEN THIS MODULE AND DIRFND IS THAT
; THIS MODULE CALLS PPNR50 TO CONVERT THE BINARY FORM OF PPN
; DIRECTLY INTO RAD50 FORM.
;
; INPUTS:
;	R0=FDB ADDRESS
;	R1=FILE NAME BLOCK ADDRESS
;	R2=FSR2 - FILE STORAGE CONTROL BLOCK
; OUTPUTS:
;	RAD50 FORM OF PPN ESTABLISHED IN FNB, AND CONTROL IS
;	TRANSFERRED TO THE SECOND HALF OF FIND DIRECTORY ID ROUTINE
;	(DIFND); R1-R3 RESTORED AND CONTROL RETURNED
;	TO CALLER THERE.
;-
..DIDF::MOV	R3,-(SP)
	MOV	R2,-(SP)
	.IF	EQ,R$RSTS							;LEB001
	MOV	R1,-(SP)							;LEB001
	.IFTF									;LEB001
	MOV	A.DFUI-A.DFDR(R2),R2	;R2=PPN, I.E., TASK UIC			;LEB001
	.IFT									;LEB001
	MOV	R2,N.DID+4(R1)	;STORE BINARY PPN AS 3RD WORD OF DIR. ID	;LEB001
	.IFF									;LEB001
	MOV	R2,N.DID(R1)	;STORE BINARY PPN AS DIRECTORY ID 		;LEB001
	.IFT									;LEB001
	ADD	#N.FNAM,R1	;R1 POINTS TO LOC. TO STORE RAD50 FILE NAME	;**-3
	CALL	.PPR50		;CONVERT PPN INTO RAD50 FORM
	MOV	(SP)+,R1	;R1 POINTS TO FNB AGAIN
	.ENDC									;LEB001
	JMP	..DID		;JUMP TO DIFND
;
;
	$END	DIDFND
;
	.END
