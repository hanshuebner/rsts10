	$BEGIN	WAITU,<28.1>,<WAIT FOR I/O DONE - USER INTERFACE>
; 
; THIS  SOFTWARE  IS FURNISHED UNDER A LICENSE AND MAY
; BE USED OR COPIED ONLY IN ACCORDANCE WITH THE  TERMS
; OF SUCH LICENSE.
;  
; COPYRIGHT (c) 1982 BY DIGITAL EQUIPMENT CORPORATION.
; ALL RIGHTS RESERVED.
; 
; PETER H. LIPMAN 10-OCT-73
;


;+
; WAIT FOR I/O COMPLETION FROM PREVIOUSLY ISSUED READ$ OR WRITE$
; CALLING SEQUENCE
;	CALL	.WAIT
; INPUTS:
;	R0=FDB
; OUTPUTS:
;	C=0 FOR I/O COMPLETED WITHOUT ERROR
;	C=1 IF ERROR FROM THE SPECIFIED I/O REQUEST, F.ERR SET
;	ALL REGISTERS PRESERVED
;-
.WAIT::	.SAVR1
	MOV	F.BKST(R0),R1	;ADR OF I/O STATUS BLOCK
	BNE	10$		;IF NON ZERO, NORMAL WAIT
	CALLR	..WAEF		;OTHERWISE JUST WAIT FOR EVENT FLAG
10$:	CALLR	..WAIT		;WAIT FOR I/O COMPLETION
;
;
	$END	WAITU
;
;
	.END
