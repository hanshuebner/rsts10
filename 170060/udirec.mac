	$BEGIN	UDIREC,<28.1>,<USER DIRECTORY PRIMITIVE CALLS>
; 
; THIS  SOFTWARE  IS FURNISHED UNDER A LICENSE AND MAY
; BE USED OR COPIED ONLY IN ACCORDANCE WITH THE  TERMS
; OF SUCH LICENSE.
;  
; COPYRIGHT (c) 1982 BY DIGITAL EQUIPMENT CORPORATION.
; ALL RIGHTS RESERVED.
; 
; PETER H. LIPMAN 17-AUG-73
;
; PREVIOUSLY MODIFIED BY
;
;	G. H. KUENNING
;	B. LEAVITT
;	S. RUZICH
;			


;+
; .ENTER, .FIND, .REMOVE, USER INTERFACE TO DIRECTORY PRIMITVES
; CALLING SEQUENCE:
;	CALL	.ENTER
;	CALL	.FIND
;	CALL	.REMOV
; INPUTS:
;	R0=FDB ADDRESS
;	R1=FILE NAME BLOCK ADDRESS
;	F.LUN(R0) = LUN TO USE
;	F.EFN(R0) = EVENT FLAG TO USE
;	N.DVNM(R1)=DEVICE NAME
;	N.UNIT(R1)=UNIT
;	N.DID(R1)=3 WORD DIRECTORY ID OF DESIRED DIRECTORY FILE
;	REST OF FILE NAME BLOCK SET APPROPRIATELY
; OUTPUTS:
;	C=0 FOR SUCCESS, FILE NAME BLOCK SET UP WITH FILE ID
;	C=1 FOR FAILURE, F.ERR(R0) SET TO REASON
;	ALL REGISTERS PRESERVED
;	F.LUN(R0) ASSIGNED TO DEVICE AND UNIT IN FNB
;-
;
;
; ENTER A NEW FILE NAME IN THE SPECIFIED DIRECTORY
	.ENABL LSB
.ENTER::.SAVR1
	CALL	..ALUN		;ASSIGN LUN
	BCS	10$
	CALLR	..ENTR		;ENTER FILENAME IN DIRECTORY
10$:	RETURN
;
; REMOVE THE SPECIFIED FILE FROM THE SPECIFIED DIRECTORY
; RETURNING IT'S FILE ID
.REMOV::.SAVR1
	CALL	..ALUN		;ASSIGN LUN
	BCS	10$
	CALLR	..RMOV		;REMOVE FILENAME FROM DIRECTORY
;
; FIND THE SPECIFIED FILE NAME IN THE SPECIFIED DIRECTORY, AND
; RETURN THE FILE ID AND ANY FILE NAME FIELDS THAT WERE
; WILD CARD OR DEFAULTED.
.FIND::	.SAVR1
	CALL	..ALUN		;ASSIGN LUN
	BCS	10$
	CALLR	..FIND		;FIND FILENAME IN DIR, RETURNING FID

	.DSABL LSB
;
;
	$END	UDIREC
;
;
	.END
