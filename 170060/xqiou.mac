	$BEGIN	XQIOU,<28.1>,<EXECUTE QI/O - USER INTERFACE>
; 
; THIS  SOFTWARE  IS FURNISHED UNDER A LICENSE AND MAY
; BE USED OR COPIED ONLY IN ACCORDANCE WITH THE  TERMS
; OF SUCH LICENSE.
;  
; COPYRIGHT (c) 1982 BY DIGITAL EQUIPMENT CORPORATION.
; ALL RIGHTS RESERVED.
; 
; PETER H. LIPMAN 10-OCT-73
;


;+
; EXECUTE A QI/O SYSTEM DIRECTIVE, AND WAIT FOR IT'S COMPLETION
; CALLING SEQUENCE:
;	CALL	.XQIO
; INPUTS:
;	R0=FDB ADDRESS, LUN AND EVENT FLAG USED
;	R1=I/O FUNCTION CODE
;	R2=NO. OF EXTRA PARAMETERS BEYOND THE STANDARD QI/O DPB
;	R3=ADDRESS OF EXTRA PARAMETER BLOCK, IF R2 IS NON-ZERO
; OUTPUTS:
;	C=0 IF OK, C=1 IF ERROR, F.ERR SET TO REASON WHY
;	ALL REGISTERS PRESERVED
;-
.XQIO::.SAVR1
	MOV	#1,F.ERR(R0)
	MOV	R1,R4		;I/O FUNCTION CODE
	CALL	..IDPB		;INIT THE DPB, SET R5 TO PARAM BLOCK
	TST	R2
	BEQ	20$
10$:	MOV	(R3)+,(R5)+	;MOVE THE PARAMTERS TO THE DPB
	SOB	R2,10$
20$:	CALLR	..QIOW		;ISSUE THE QI/O, WAIT, AND RETURN
;
;
	$END	XQIOU
;
;
	.END
