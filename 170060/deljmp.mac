	$BEGIN	DELJMP,<29.00>,<RESIDENT LIB .DLFNB ENTRY POINT>
; 
; THIS  SOFTWARE  IS FURNISHED UNDER A LICENSE AND MAY
; BE USED OR COPIED ONLY IN ACCORDANCE WITH THE  TERMS
; OF SUCH LICENSE.
;  
; COPYRIGHT (c) 1982 BY DIGITAL EQUIPMENT CORPORATION.
; ALL RIGHTS RESERVED.
; 
; S. RUZICH 16-JUN-81
;
;+
;
; SIMULATE .DLFNB ENTRY POINT, SO THAT HAVING BOTH DLFNB AND DELETE IN
; THE SAME RESIDENT LIBRARY CAN BE AVOIDED.
;
; EVEN THOUGH DELETE.OBJ IS BIGGER THAN DLFNB.OBJ, IT IS CHEAPER TO SIMULATE
; .DELET, RATHER THAN .DLFNB.
;
;    INPUT:	R0 -	ADDRESS OF FILE DESCRIPTOR BLOCK
;
;    OUTPUT:	THE FILE IS CLOSED.
;		ALL REGISTERS PRESERVED
;		CARRY INDICATES SUCCESS/FAILURE
;		F.ERR(R0) CONTAINS ERROR CODE
;
;-
;
; MODIFICATIONS:
;
; S. M. THOMAS	18-FEB-83
;
;	SMT022 -- SET UP R1 TO POINT TO FNB BEFORE CALLING
;		  .FIND FROM .DLFNB
;
.DLFNB::TST	F.BDB(R0)	; DELETE BY FILE NAME BLOCK;  IS THE FILE OPEN?
	BNE	10$		; YES- NO PROBLEM
	MOV	R0,R1		; POINT TO FDB
	ADD	#F.FNB,R1	; ADD IN F.FNB TO POINT R1 TO FNB
	CALL	.FIND		; NO - ASSIGN LUN AND...
				; ...FIND FILE ID, TO PREVENT PARSE IN .DELET
	BCS	20$		; CS - REPORT ERROR
10$:	CALL	.DELET		; CC - DELETE FILE
20$:	RETURN			;
;
;
	$END	DELJMP
;
	.END
