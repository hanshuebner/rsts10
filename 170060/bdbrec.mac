	$BEGIN	BDBREC,<28.1>,<SET BUF DESCRIPTOR AND REC POINTERS>
; 
; THIS  SOFTWARE  IS FURNISHED UNDER A LICENSE AND MAY
; BE USED OR COPIED ONLY IN ACCORDANCE WITH THE  TERMS
; OF SUCH LICENSE.
;  
; COPYRIGHT (c) 1982 BY DIGITAL EQUIPMENT CORPORATION.
; ALL RIGHTS RESERVED.
; 
; PETER H. LIPMAN 16-AUG-73
;
;+
; SET BUFFER DESCRIPTOR AND RECORD POINTERS FOR NEXT VBN
; CALLING SEQUENCE
;	CALL	..BDRC
; INPUTS:
;	R0=FDB
;	R1=BUFFER DESCRIPTOR
; OUTPUTS:
;	R0,R2-R5 PRESERVED R1 ALTERED
;	B.VBN,B.BBFS,F.NREC,F.EOBB SET UP
;-
..BDRC::
	MOV	F.VBN(R0),B.VBN(R1)
	MOV	F.VBN+2(R0),B.VBN+2(R1)
	MOV	F.BBFS(R0),B.BBFS(R1)
	ADD	#S.BFHD,R1
	MOV	R1,F.NREC(R0)
	BITB	#FD.REC,F.RCTL(R0) ;IF RECORD ORIENTED
	BEQ	10$
	ADD	F.BBFS(R0),R1	;USE BUFFER SIZE
	BR	20$
10$:	ADD	F.VBSZ(R0),R1	;OTHERWISE USE VB SIZE
20$:	MOV	R1,F.EOBB(R0)
	RETURN
;
;
	$END	BDBREC
;
;
	.END
