	.TITLE	.STTIM
	.IDENT	/01/

;
;		COPYRIGHT (c) 1981 BY
;	DIGITAL EQUIPMENT CORPORATION, MAYNARD
;	 MASSACHUSETTS.  ALL RIGHTS RESERVED.
;
; THIS  SOFTWARE  IS  FURNISHED  UNDER  A LICENSE AND MAY BE USED
; AND  COPIED  ONLY IN  ACCORDANCE WITH THE TERMS OF SUCH LICENSE
; AND WITH  THE INCLUSION  OF THE ABOVE  COPYRIGHT  NOTICE.  THIS
; SOFTWARE  OR ANY OTHER  COPIES  THEREOF, MAY NOT BE PROVIDED OR
; OTHERWISE MADE  AVAILABLE TO ANY OTHER PERSON.  NO TITLE TO AND
; OWNERSHIP OF THE SOFTWARE IS HEREBY TRANSFERED.
;
; THE INFORMATION  IN THIS DOCUMENT IS SUBJECT  TO CHANGE WITHOUT
; NOTICE AND SHOULD NOT BE CONSTRUED AS A COMMITMENT  BY  DIGITAL
; EQUIPMENT CORPORATION.
;
; DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF
; ITS SOFTWARE ON EQUIPMENT THAT IS NOT SUPPLIED BY DIGITAL.
;
; COPYRIGHT (c)	1981 BY DIGITAL EQUIPMENT CORPORATION.
; ALL RIGHTS RESERVED.
;
; THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED
; OR COPIED ONLY IN ACCORDANCE WITH THE TERMS OF SUCH LICENSE.
;
; VERSION 01
;
; T.MARTIN 6-JAN-80
;
; FORTRAN CALLABLE ROUTINE TO ISSUE THE "SET SYSTEM TIME" DIRECTIVE
;
.SBTTL	"SET TIME" DIRECTIVE
;+
; SETTIM -- SUBROUTINE TO ISSUE A "SET SYSTEM TIME" DIRECTIVE
; GETTIM -- SUBROUTINE TO GET SYSTEM TIME
;
; CALLING SEQUENCE:
;
;	CALL SETTIM (IBUFN[,IBUFP][,IDS]
;	CALL GETTIM (IBUFP[,IDS])
;
; ARGUMENT DESCRIPTION:
;
;	'IBUFN' IS AN EIGHT WORD INTEGER ARRAY CONTAINING NEW
;		TIME SPECIFICATION
;	'IBUFP' IS AAN EIGHT WORD INTEGER ARRAY TO RECEIVE PREVIOUS
;		TIME SPECIFICATION
;	'IDS'	IS  AN INTEGER TO RECEIVE THE DIRECTIVE STATUS WORD
;
; BUFFER FORMAT:
;
;	WORD 0 -- YEAR (SINCE 1900)
;	WORD 1 -- MONTH (1-12)
;	WORD 2 -- DAY (1-X, WHERE X IS THE HIGHEST DAY FOR THE GIVEN
;		  MONTH AND YEAR
;	WORD 3 -- HOUR (1-23)
;	WORD 4 -- MINUTE (0-59)
;	WORD 5 -- SECOND (0-59)
;	WORD 6 -- TICK OF SECOND (1-X, WHERE X IS THE FREQUENCY OF THE
;		  SYSTEM CLOCK.  IN ORDER TO SPECIFY THIS PARAMETER, 
;		  THE "TICKS PER SECOND PARAMETER MUST BE SPECIFIED
;	WORD 7 -- TICKS PER SECOND (IF SPECIFIED, MUST MATCH FREQUENCY
;		  OF SYSTEM CLOCK)
;-
;
GETTIM::
	MOV	#2,R2		;SPECIFY MAX ARG CT
	MOV	R2,R1		;SPECIFY REQ'D ARG BITMASK
	CALL	.X.PA1		;PUSH ARGUMENT LIST ADDRESSES ONTO STACK
	MOV	(PC)+,-(SP)	;PUSH DIC AND DPB SIZE ON STACK
	.BYTE	61.,2.
	JMP	.X.EX1		;ISSUE DIRECTIVE AND EXIT

SETTIM::MOV	#3,R2		;SPECIFY MAX ARG CT
	MOV	#4,R1		;SPECIFY REQ'D ARG BITMASK
	CALL	.X.PA1		;PUSH ARGUMENT LIST ADDRESSES ONTO STACK
	MOV	(PC)+,-(SP)	;PUSH DIC AND DPB SIZE
	.BYTE	61.,3.
	JMP	.X.EX1		;ISSUE DIRECTIVE AND EXIT
	.END









