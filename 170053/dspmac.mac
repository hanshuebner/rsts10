;
; COPYRIGHT (C) 1981
; DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
;
; THIS SOFTWARE IS FURNISHED UNDER A LICENSE FOR USE ONLY ON A
; SINGLE COMPUTER SYSTEM AND MAY  BE  COPIED   ONLY  WITH  THE
; INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE,  OR
; ANY OTHER COPIES THEREOF, MAY NOT BE PROVIDED  OR  OTHERWISE
; MADE AVAILABLE TO ANY OTHER PERSON   EXCEPT FOR  USE ON SUCH
; SYSTEM AND TO ONE WHO AGREES TO THESE LICENSE  TERMS.  TITLE
; TO AND OWNERSHIP OF THE SOFTWARE SHALL AT ALL  TIMES  REMAIN
; IN DEC.
;
; THE INFORMATION IN THIS DOCUMENT IS SUBJECT TO CHANGE WITHOUT
; NOTICE AND SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL
; EQUIPMENT CORPORATION.
;
; DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF
; ITS SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.
;         
;
; VERSION 02
;
; T. M. MARTIN  03-FEB-81
;
; MACRO DEFINITIONS TO SUPPORT USER DATA SPACE
;
; MODIFIED BY:
;
;	B. S. MCCARTHY	24-SEP-81
;
;		CORRECT MVTS$ OFFSET DEFINITIONS
;


;
; MOVE TO/FROM USER/SUPERVISOR I/D-SPACE
;
	.MACRO	MVTS$	ACTION,ADDR,VAL
	.MCALL	OFF$
	.IF	NDF $$$GLB
	.BYTE	203.,4.
	.WORD	ACTION
	.WORD	ADDR
	.WORD	VAL
	.ENDC
;
; DEFINE DPB OFFSETS
;
	.IF	NDF M.VTAC
	.IRP	X,<,<M.VTAC,2>,<M.VTAD,2>,<M.VTVA,0>,<M.VTBF,2>>
	OFF$	X
	.ENDM
;
; DEFINE ACTIONS
;
	$$$=0
	.IRP	X,<<MV.FUI,1>,<MV.FSI,1>,<MV.FUD,1>,<MV.FSD,1>>
	OFF$	X
	.ENDM
	.IRP	X,<<MV.TUI,1>,<MV.TSI,1>,<MV.TUD,1>,<MV.TSD,1>>
	OFF$	X
	.ENDM
	.ENDC
	.ENDM	MVTS$

;
	.MACRO	MVTS$C	ACTION,ADDR,VAL,CS,ERR
	.MCALL	MVTS$,DIR$
	.IF	NDF $$$GLB
	.PSECT	$DPBD$	D
$$$=.
	.IFTF
	MVTS$	ACTION,ADDR,VAL
	.IFT
	.PSECT	CS
	DIR$	#$$$,ERR
	.ENDC
	.ENDM
;
	.MACRO MVTS$S	ACTION,ADDR,VAL,ERR
	.MCALL	MOV$,DIR$
	MOV$	VAL
	MOV$	ADDR
	MOV$	ACTION
	MOV	(PC)+,-(SP)
	.BYTE	203.,4.
	DIR$	,ERR
	.ENDM

;
; MAP SUPERVISOR D-SPACE
;
	.MACRO	MSDS$	MASK
	.MCALL	OFF$
	.IF	NDF $$$GLB
	.BYTE	201.,2.
	.WORD	MASK
	.ENDC
;
; DEFINE DPB OFFSETS
;
	.IF	NDF M.SDMA
	.IRP	X,<,<M.SDMA,2>>
	OFF$	X
	.ENDM
	.ENDC
	.ENDM	MSDS$

;
	.MACRO	MSDS$C	MASK,CS,ERR
	.MCALL	MSDS$,DIR$
	.IF	NDF $$$GLB
	.PSECT	$DPBD$	D
$$$=.
	.IFTF
	MSDS$	MASK
	.IFT
	.PSECT	CS
	DIR$	#$$$,ERR
	.ENDC
	.ENDM
;
	.MACRO MSDS$S	MASK,ERR
	.MCALL	MOV$,DIR$
	MOV$	MASK
	MOV	(PC)+,-(SP)
	.BYTE	201.,2.
	DIR$	,ERR
	.ENDM
