
	.IF NDF	W$$KST & W$$OPT

	.TITLE	VMDAT

	.ENDC

	.IF DF	W$$KST

	.TITLE	VMDAS

	.ENDC

	.IF DF	W$$OPT

	.TITLE	VMDATX

	.ENDC

	.IDENT	/04.01/
;
;		COPYRIGHT (c) 1990 BY
;	DIGITAL EQUIPMENT CORPORATION, MAYNARD
;	 MASSACHUSETTS.  ALL RIGHTS RESERVED.
;
; THIS  SOFTWARE  IS  FURNISHED  UNDER  A LICENSE AND MAY BE USED
; AND  COPIED  ONLY IN  ACCORDANCE WITH THE TERMS OF SUCH LICENSE
; AND WITH  THE INCLUSION  OF THE ABOVE  COPYRIGHT  NOTICE.  THIS
; SOFTWARE  OR ANY OTHER  COPIES  THEREOF, MAY NOT BE PROVIDED OR
; OTHERWISE MADE  AVAILABLE TO ANY OTHER PERSON.  NO TITLE TO AND
; OWNERSHIP OF THE SOFTWARE IS HEREBY TRANSFERRED.
;
; THE INFORMATION  IN THIS DOCUMENT IS SUBJECT  TO CHANGE WITHOUT
; NOTICE AND SHOULD NOT BE CONSTRUED AS A COMMITMENT  BY  DIGITAL
; EQUIPMENT CORPORATION.
;
; DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF
; ITS SOFTWARE ON EQUIPMENT THAT IS NOT SUPPLIED BY DIGITAL.
;
;
;
; C. MONIA 17-AUG-74
;
; TABLES AND DEFINITIONS FOR VIRTUAL MEMORY ROUTINES
;
; PREVIOUSLY MODIFIED BY:
;
;	C. B. PETROVIC
;
; MODIFIED FOR RSX-11M-PLUS V4.0 BY:
;
;	J. C. FRANZINI	 2-JUN-86	04.00
;		JCF292 -- IMPROVE ERROR HANDLING OF WORK FILE OPEN FAILURES
;
; MODIFIED FOR RSX-11M-PLUS V4.4 BY:
;	L. M. PETERSON	20-NOV-90	04.01
;		LMP148 -- ADD SUPPORT AND CONDITIONALIZE FOR OPTIMIZED VERSION
;			  OF TKB (HFT)
;+
;
; **-VMDAT- DEFINE VIRTUAL MEMORY STORAGE PARAMETERS AND
;	    TABLES
;
;	THIS MODULES CONTAINS ALL GLOBALLY REFERENCED
; DEFINITIONS AND STORAGE FOR THE VIRTUAL MEMORY MANAGEMENT
; SUBROUTINES.
;
;-
;	
; MACRO LIBRARY CALLS
;

	.IF NDF	W$$OPT								;LMP148
										;LMP148
	.MCALL	FCSBT$,FDAT$A,FDBDF$,FDOP$A,FDRC$A				;LMP148
										;LMP148
	.ENDC									;LMP148
;										;**-2
; EQUATED SYMBOLS
;
;
; DEFINE PAGE BUFFER OFFSETS
;

	.PSECT	$$VMDF,ABS

P$GNXT::.BLKW	1		; LINK TO NEXT PAGE
P$GBLK::.BLKB	1		; PAGE RELATIVE BLOCK NUMBER
P$GSTS::.BLKB	1		; PAGE STATUS BYTE
P$GTIM::.BLKW	1		; 'TIME' OF LAST REFERENCE
P$GLOK::.BLKB	1		; PAGE LOCK COUNT

	.EVEN

P$GHD::				; SIZE OF PAGE HEADER

	.BLKW	256.

P$GSIZ::			; SIZE OF PAGE


;
; PAGE STATUS BITS
;

PG$WRT==000001			; PAGE WRITTEN INTO (1=YES)

	IMPURE			; READ/WRITE D-SPACE

;
; GLOBAL DATA
;
; NEXT AVAILABLE VIRTUAL ADDRESS
;

$HGVAD::.BLKW	1		;

;
; POINTER TO RESIDENT PAGE LIST
;

$PAGLS::.BLKW	1		;

;
; RESIDENT PAGE LISTHEAD
;

$PAGHD::.BLKW	1		;

;
; PAGE BUFFER TIME OF LAST USE
;

$TIME::	.BLKW	1		;

										;**-1
;
; TOP OF TASK R/W VIRTUAL MEMORY
;

$TPADR::.BLKW	1		;

;
; WORKFILE ACCESS COUNTS (ADJACENCY REQUIRED)
;
; TOTAL NUMBER OF WORKFILE ACCESSES
;

$WRKAC::.BLKW	2		;

;
; WORK FILE READ COUNT
;

$WRKRD::.BLKW	2		;

;
; WORK FILE WRITE COUNT
;

$WRKWR::.BLKW	2		;

										;LMP148
	.IF NDF	W$$OPT								;LMP148
										;**-1
;
; WORK FILE FDB
;

$WRKPT::.WORD	WRKPT		; ADDRESS OF FDB

WRKPT:	FDBDF$			; ALLOCATE SPACE FOR FDB
	FCSBT$			; DEFINE FCS BITS
	FDAT$A	R.FIX,,512.	; FIXED LENGTH 512. BYTE RECORDS,
	FDRC$A	FD.RWM!FD.RAN	; READ/WRITE MODE, RANDOM ACCESS
	FDOP$A	W$KLUN		; I/O VIA LUN DEFINED AT TASK BUILD TIME

	.ENDC									;LMP148
										;LMP148
	.IF DF	W$$OPT								;LMP148
										;LMP148
;										;LMP148
; VSECT OFFSET (INTO APR)							;LMP148
;										;LMP148
										;LMP148
$VOFF::	.BLKW	1		;						;LMP148
										;LMP148
	.ENDC									;LMP148
										;**-10
	.END
