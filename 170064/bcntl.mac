	.TITLE	BCNTL
	.IDENT	/01.01/
;
; COPYRIGHT (c)	1983 BY DIGITAL EQUIPMENT CORPORATION.
; ALL RIGHTS RESERVED.
;
; THIS  SOFTWARE IS FURNISHED  UNDER A LICENSE AND MAY BE USED OR
; COPIED ONLY IN ACCORDANCE WITH THE TERMS OF SUCH LICENSE.
;
;
; C. MONIA	17-JAN-74
;
; MODIFIED BY:
;
;	C. B. PETROVIC	26-FEB-82	01.01
;		CBP039		ADD CORRECT .PSECT DEFINITIONS TO
;				ALLOW TKB TO BE LINKED AS AN I/D TASK.
;
;
; INVOKE ROUTINES TO GENERATE SEGMENT DESCRIPTORS
;
;+
; **-$BCNTL-CALL ROUTINES TO GENERATE SEGMENTS
;
; INPUTS:
;
;	R4: UTILTIY FDB POINTER SETUP WITH DEFAULT NAME BLOCK FOR
;	    INPUT FILE
;
; OUTPUTS:
;
;	NONE.
;
;	THIS ROUTINE IS ENTERED VIA JMP AND RETURNS CONTROL
;	TO $BLDSF (BLDSG) ON COMPLETION.
;
;	THE CONTENTS OF R3-R5 ARE PRESERVED
;-
	PURE.I			; READ-ONLY I-SPACE
$BCNTL::			;
	BIT	#SW$MP,R$SWTH(R4) ; "MP" SWITCH SPECIFIED?
	BNE	20$		; IF NE YES
	CALL	$SNGSG		; CREATE SINGLE SEGMENT DESCRIPTION
	BR	30$		;
20$:				;
	CALL	$MULSG		; CREATE MULTI-SEGMENT DESCRIPTION
30$:				;
	JMP	$BLDSF 		;EXIT

	.END
