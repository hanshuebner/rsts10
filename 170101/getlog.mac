TITLE	GETLOG,<RETURN USER LOGICALS>,0A,10-MAY-91,JJT

;
;		COPYRIGHT (c) 1974, 1991 BY
;	DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
;
; THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND  COPIED
; ONLY  IN  ACCORDANCE  WITH  THE  TERMS  OF  SUCH  LICENSE AND WITH THE
; INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE OR  ANY  OTHER
; COPIES  THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY
; OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE  IS  HEREBY
; TRANSFERRED.
;
; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITHOUT  NOTICE
; AND  SHOULD  NOT  BE  CONSTRUED  AS  A COMMITMENT BY DIGITAL EQUIPMENT
; CORPORATION.
;
; DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE  OR  RELIABILITY  OF ITS
; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.
;

	.PAGE
	.SBTTL	GETLOG EDIT HISTORY
	;+
	;
	;-

	.PAGE
	.SBTTL	DEFINE AND ORDER THE .PSECTS

	.PSECT	LOGICL	RW,D,GBL,REL,OVR	; DEFINE USER LOGICAL BUFFER
PPN:	.BLKW					; ONE WORD FOR THE PPN
PROT:	.BLKW					; ONE WORD FOR THE PROT CODE
LOG:	.BLKW 4*4				; 16 WORDS FOR THE LOGICALS
	BLKLEN = . - PPN			; GET THE TOTAL BUFFER SIZE


	.PSECT	GETLOG

	.PAGE
	.SBTTL	MAINLINE CODE

GETLOG::
	.ASSUME	<USRPPN & 1> EQ 0		; MUST START ON EVEN ADDRESS
	.ASSUME	USRPRT EQ <USRPPN + 2>		; PROT CODE MUST FOLLOW PPN
	.ASSUME	USRLOG EQ <USRPRT + 2>		; LOGICALS MUST FOLLOW PROT
	MOV	#<BLKLEN/2>,R0			; NUMBER OF WORDS TO MOVE
	MOV	#USRPPN,R1			; FROM ADDRESS IN R1
	MOV	#PPN,R2				; TO ADDRESS IN R2
MOVLOP:	MOV	(R1)+,(R2)+			; STORE THIS WORD
	SOB	R0,MOVLOP			; GO DO NEXT IF THERE IS MORE
	RTS	PC				; RETURN TO MAIN PROGRAM

	.END
