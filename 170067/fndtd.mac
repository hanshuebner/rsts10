	.TITLE	FNDTD
	.IDENT	/00/
;
; COPYRIGHT   1974,  DIGITAL  EQUIPMENT  CORP.,  MAYNARD,   MASS.
;
; THIS SOFTWARE IS FURNISHED TO PURCHASER UNDER A LICENSE FOR USE
; ON A SINGLE COMPUTER SYSTEM  AND  CAN BE COPIED (WITH INCLUSION
; OF DEC'S COPYRIGHT NOTICE)  ONLY FOR USE IN SUCH SYSTEM, EXCEPT
; AS MAY OTHERWISE BE PROVIDED IN WRITING BY DEC.
;
; THE INFORMATION IN  THIS DOCUMENT IS  SUBJECT TO CHANGE WITHOUT
; NOTICE AND SHOULD NOT  BE CONSTRUED AS  A COMMITMENT BY DIGITAL
; EQUIPMENT CORPORATION.
;
; DEC ASSUMES  NO  RESPONSIBILITY  FOR  THE  USE  OR  RELIABILITY
; OF ITS  SOFTWARE  ON  EQUIPMENT  WHICH IS NOT  SUPPLIED BY DEC.
;
; VERSION 00
;
; C. MONIA 26-DEC-74
;
; FIND TABLE DESCRIPTOR
;
;+
; **-$FNDTD-FIND SYMBOL TABLE DESCRIPTOR
;
; INPUTS:
;
;	R1=ADDRESS OF CREF INPUT FILE DATA ENTRY
;	R5=ADDRESS OF FORMAT CONTROL TABLE ENTRY
;
; OUTPUTS:
;
;	R0=ADDRESS OF TABLE DESCRIPTOR
;
; ALL OTHER REGISTER CONTENTS ARE PRESERVED
;
;-

$FNDTD::			;
	MOVB	D$FMT(R1),-(SP)	; GET MAX LEGAL FORMAT
	CMPB	(SP),F$MCMF(R5)	; FORMAT WITHIN RANGE?
	BHI	30$		; IF HI NO
	MOV	F$MCTD(R5),R0	; POINT TO FIRST TABLE DESCRIPTOR
10$:				;
	DECB	(SP)		; DECREMENT FORMAT NUMBER
	BMI	20$		; IF MI HAVE DESCRIPTOR ADDRESS
	ADD	#T$DLTH,R0	; POINT TO NEXT ENTRY
	BR	10$		; GO AGAIN
20$:				;
	INC	(SP)+		; CLEAN STACK
	RETURN			;
30$:				;
	ERROR$	E$R6,S$V2	; ILLEGAL FORMAT SPECIFIED

	.END
