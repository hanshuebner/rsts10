	.TITLE	CRFDB
	.IDENT	/02/

;
; COPYRIGHT   1974,  DIGITAL  EQUIPMENT  CORP.,  MAYNARD,   MASS.
;
; THIS SOFTWARE IS FURNISHED TO PURCHASER UNDER A LICENSE FOR USE
; ON A SINGLE COMPUTER SYSTEM  AND  CAN BE COPIED (WITH INCLUSION
; OF DEC'S COPYRIGHT NOTICE)  ONLY FOR USE IN SUCH SYSTEM, EXCEPT
; AS MAY OTHERWISE BE PROVIDED IN WRITING BY DEC.
;
; THE INFORMATION IN  THIS DOCUMENT IS  SUBJECT TO CHANGE WITHOUT
; NOTICE AND SHOULD NOT  BE CONSTRUED AS  A COMMITMENT BY DIGITAL
; EQUIPMENT CORPORATION.
;
; DEC ASSUMES  NO  RESPONSIBILITY  FOR  THE  USE  OR  RELIABILITY
; OF ITS  SOFTWARE  ON  EQUIPMENT  WHICH IS NOT  SUPPLIED BY DEC.
;
; VERSION 01
;
; C. MONIA 19-DEC-74
;
; MODIFICATIONS:
;
;		CM001 -- 31-OCT-75
;
;			 ADD MACRO CREF
;
;		JRW01 -- 11-Dec-82
;			 Add macro cref tables for p-section
;			 cross reference (/CR:SEC) and error
;			 cross reference (/CR:ERR)
;
;
; CREF OUTPUT DEPENDANT DATA BASE
;
; MACRO LIBRARY CALLS
;

	.MCALL	CRFC$,CRFND$,CRFSF$,CRFTD$

;
; EQUATED SYMBOLS
;
; WILD CARD MATCH
;

WI$LD=000			; MATCH ON ANY ATTRIBUTES

;
; MACRO ATTRIBUTES FLAG BYTE DEFINITIONS
;

SY$DFR=200			; DEFINITION RECORD (1=YES)
SY$GBL=100			; GLOBAL SYMBOL (1=GBL, 0=LCL)
SY$REL=040			; RELOCATABLE SYMBOL (1=REL, 0=ABS)
SY$DFG=020			; DEFAULT GLOBAL SYMBOL (1=YES., 0=NO)
SY$DEF=010			; SYMBOL DEFINED (1=YES)
SY$DES=004			; DESTRUCTIVE REFERENCE (1=YES, 0=NO)
SY$EQU=002			; EQUATED SYMBOL (1=NO, 0=YES)
SY$REG=001			; REGISTER SYMBOL (1=YES, 0=NO)

;
; MACRO MAXIMUM FORMAT VALUE AND IDENTIFICATION
;

M$ACFM=000005			; MACRO MAX VALUE OF FORMAT BYTE
M$ACID=000001			; MACRO CREF I/D

;
; TASK BUILDER ATTRIBUTE FLAGS BYTE DEFINITIONS
;

SY$IND=200			; INDIRECT REFERENCE (1=YES)
SY$GBL=100			; GLOBAL SYMBOL (1=GBL,0=LCL)
SY$REL=040			; RELOCATABLE SYMBOL (1=REL,0=ABS)
SY$ATL=020			; AUTOLOAD DEFINITION (1=AUTO,0=REF)
SY$DEF=010			; DEFINITION (1=DEF,0=REF)
SY$ATR=002			; AUTOLOAD REFERENCE (1=AUTO,0=DIR)

;
; TASK BUILDER MAXIMUM FORMAT BYTE VALUE AND IDENTIFICATION
;

T$KBFM=000001			; TKB MAX. VALUE OF FORMAT BYTE
T$KBID=000000			; TASK BUILDER CREF I/D

;
; LOCAL DATA
;
; DEFINE START OF FORMAT CONTROL TABLE
;

	.PSECT	$$FMCT,D,GBL

$FMCT::	.WORD	-1		; DUMMY TERMINATOR

	.PSECT


;
; MACRO CREF FORMAT DESCRIPTION - SYMBOL CROSS REFERENCE
;

	CRFC$	MACRO,M$ACID,M$ACFM ; FORMAT CONTROL TABLE ENTRY

	CRFTD$	^\SYMBOL\,^\SYMBOL	VALUE		REFERENCES\

;
; MACRO SUBFIELD BITMASK TABLES FOR SYMBOLIC CROSS REFERENCE
;

	CRFSF$	VSF0,WI$LD,^\=%\
	CRFSF$	VSF0,<SY$EQU!SY$REG>,^\= \,CLEAR
	CRFSF$	VSF0,SY$EQU,^\  \
	CRFSF$	VSF0,<SY$EQU!SY$REG>,^\ %\

	CRFSF$	VSF1,SY$DEF,^\      \
	CRFSF$	VSF1,SY$DEF,^\******\,CLEAR

	CRFSF$	VSF2,WI$LD,^\	\
	CRFSF$	VSF2,SY$REL,^\ R	\
	CRFSF$	VSF2,SY$GBL,^\  G	\
	CRFSF$	VSF2,<SY$REL!SY$GBL>,^\ RG	\
	CRFSF$	VSF2,<SY$GBL!SY$DFG>,^\  GX	\

	CRFSF$	RSF0,WI$LD,^\ \
	CRFSF$	RSF0,SY$DES,^\*\
	CRFSF$	RSF0,SY$DFR,^\#\

	CRFSF$	RSF1,WI$LD,^\%10<%D-%D%8>\

	CRFND$

;
; MACRO CREF FORMAT DESCRIPTION - REGISTERS
;

	CRFTD$	^\REGISTER SYMBOL\,^\SYMBOL		REFERENCES\

;
; MACRO REGISTER SYMBOL BIT MASK TABLES
;

	CRFSF$	VSF0,WI$LD,^\\
	CRFSF$	VSF1,WI$LD,^\      \
	CRFSF$	VSF1,WI$LD,^\	\
	CRFSF$	VSF2,WI$LD,^\\

	CRFSF$	RSF0,WI$LD,^\ \
	CRFSF$	RSF0,SY$DFR,^\#\
	CRFSF$	RSF0,SY$DES,^\*\

	CRFSF$	RSF1,WI$LD,^\%10<%D-%D%8>\

	CRFND$

;
; MACRO CREF FORMAT DESCRIPTION - MACROS
;

	CRFTD$	^\MACRO\,^\MACRO NAME	REFERENCES\

;
; MACRO CREF SUBFIELD BITMASK TABLES
;

	CRFSF$	VSF0,WI$LD,^\\
	CRFSF$	VSF1,WI$LD,^\      \
	CRFSF$	VSF1,WI$LD,^\	\
	CRFSF$	VSF2,WI$LD,^\\

	CRFSF$	RSF0,WI$LD,^\ \
	CRFSF$	RSF0,SY$DFR,^\#\
	CRFSF$	RSF1,WI$LD,^\%10<%D-%D%8>\

	CRFND$

;
; MACRO CREF PERMANENT SYMBOL TABLE FORMAT DESCRIPTION
;

	CRFTD$	^\PERMANENT SYMBOL TABLE\,^\SYMBOL		REFERENCES\

;
; MACRO CREF PERMANENT SYMBOL TABLE SUBFIELD BITMASK TABLES
;

	CRFSF$	VSF0,WI$LD,^\\
	CRFSF$	VSF1,WI$LD,^\      \
	CRFSF$	VSF1,WI$LD,^\	\
	CRFSF$	VSF2,WI$LD,^\\

	CRFSF$	RSF0,WI$LD,^\\
	CRFSF$	RSF1,WI$LD,^\%10<%D-%D%8>\

	CRFND$

;
; MACRO CREF FORMAT DESCRIPTION - P-SECTIONS
;
 
	CRFTD$	^\SECTION\,^\SECTION NAME	REFERENCES\
 
;
; MACRO CREF SUBFIELD BITMASK TABLES
;

	CRFSF$	VSF0,WI$LD,^\\
	CRFSF$	VSF1,WI$LD,^\      \
	CRFSF$	VSF1,WI$LD,^\	\
	CRFSF$	VSF2,WI$LD,^\\

	CRFSF$	RSF0,WI$LD,^\ \
	CRFSF$	RSF0,SY$DFR,^\#\
	CRFSF$	RSF1,WI$LD,^\%10<%D-%D%8>\
 
	CRFND$

;
; MACRO CREF FORMAT DESCRIPTION - MACROS
;
 
	CRFTD$	^\ERROR\,^\ERROR		REFERENCES\
 
;
; MACRO CREF SUBFIELD BITMASK TABLES
;
 
	CRFSF$	VSF0,WI$LD,^\\
	CRFSF$	VSF1,WI$LD,^\      \
	CRFSF$	VSF1,WI$LD,^\	\
	CRFSF$	VSF2,WI$LD,^\\
 
	CRFSF$	RSF0,WI$LD,^\ \
	CRFSF$	RSF0,SY$DFR,^\#\
	CRFSF$	RSF1,WI$LD,^\%10<%D-%D%8>\
 
	CRFND$

;
; TASK BUILDER CREF FORMAT DESCRIPTION
;

	CRFC$	TKB,T$KBID,T$KBFM ; FORMAT CONTROL TABLE ENTRY

	CRFTD$	^\GLOBAL\,^\SYMBOL	VALUE	   REFERENCES...\

;
; TASK BUILDER SUBFIELD BITMASK TABLES
;
	CRFSF$	VSF0,WI$LD,^\\
	CRFSF$	VSF1,WI$LD,^\      \

	CRFSF$	VSF2,SY$REL,^\-R\,SET
	CRFSF$	VSF2,SY$REL,^\  \,CLEAR

	CRFSF$	RSF0,SY$DEF,^\  # \
	CRFSF$	RSF0,<SY$DEF!SY$ATL>,^\  * \
	CRFSF$	RSF0,SY$DEF,^\    \,CLEAR
	CRFSF$	RSF0,SY$IND,^\  ^ \
	CRFSF$	RSF0,SY$ATR,^\  @ \

	CRFSF$	RSF1,WI$LD,^\%2R\

	CRFND$
 
;
; TASK BUILDER CREF FORMAT DESCRIPTION - SEGMENT CREF
;
 
	CRFTD$	^\SEGMENT\,^\SEGMENT NAME	RESIDENT MODULES\
 
;
; TASK BUILDER SEGMENT CREF BITMASK TABLES
;
 
	CRFSF$	VSF0,WI$LD,^\\
	CRFSF$	VSF1,WI$LD,^\      \
	CRFSF$	VSF1,WI$LD,^\	\
	CRFSF$	VSF2,WI$LD,^\\
 
	CRFSF$	RSF0,WI$LD,^\\
	CRFSF$	RSF1,WI$LD,^\%2R	\

	CRFND$

	.END
