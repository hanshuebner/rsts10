	.TITLE	FNDFM
	.IDENT	/00/

;
; COPYRIGHT   1974,  DIGITAL  EQUIPMENT  CORP.,  MAYNARD,   MASS.
;
; THIS SOFTWARE IS FURNISHED TO PURCHASER UNDER A LICENSE FOR USE
; ON A SINGLE COMPUTER SYSTEM  AND  CAN BE COPIED (WITH INCLUSION
; OF DEC'S COPYRIGHT NOTICE)  ONLY FOR USE IN SUCH SYSTEM, EXCEPT
; AS MAY OTHERWISE BE PROVIDED IN WRITING BY DEC.
;
; THE INFORMATION IN  THIS DOCUMENT IS  SUBJECT TO CHANGE WITHOUT
; NOTICE AND SHOULD NOT  BE CONSTRUED AS  A COMMITMENT BY DIGITAL
; EQUIPMENT CORPORATION.
;
; DEC ASSUMES  NO  RESPONSIBILITY  FOR  THE  USE  OR  RELIABILITY
; OF ITS  SOFTWARE  ON  EQUIPMENT  WHICH IS NOT  SUPPLIED BY DEC.
;
; VERSION 00
;
; C. MONIA 26-DEC-74
;
; FIND FORMAT CONTROL TABLE ENTRY
;
; INPUTS:
;
;	$CRFID=I/D OF CREF ORIGINATING TASK
;	$FMCT=FORMAT CONTROL TABLE
;	F$MCLT=LENGTH OF CONTROL TABLE ENTRY
;
; OUTPUTS:
;
;	R5=ADDRESS OF CONTROL TABLE FOR ORIGINATING TASK
;
; ALL OTHER REGISTERS ARE PRESERVED
;-

$FNDFM::			;
	MOV	#<$FMCT-F$MCLT>,R5 ; SET LIST ADDRESS MINUS OFFSET TO NEXT
10$:				;
	ADD	#F$MCLT,R5	; STEP TO NEXT TABLE ENTRY
	TST	(R5)		; AT END OF LIST?
	BMI	20$		; IF MI YES ERROR
	CMP	(R5),$CRFID	; I/D'S MATCH?
	BNE	10$		; IF NE NO GO AGAIN
	RETURN			;
20$:				;
	ERROR$	E$R5,S$V2	; UNRECOGNIZABLE TASK I/D

	.END
