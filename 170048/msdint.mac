	.INCLUDE /CMN:COMMON/
	.INCLUDE /CMN:KERNEL/
	.INCLUDE /CMN:MTDEF/
TITLE	MSDINT,<TS11 MAGTAPE DRIVER ROOT CODE>,0A,10-MAY-91,KPH/DBM

;
;		COPYRIGHT (c) 1974, 1991 BY
;	DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
;
; THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND  COPIED
; ONLY  IN  ACCORDANCE  WITH  THE  TERMS  OF  SUCH  LICENSE AND WITH THE
; INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE OR  ANY  OTHER
; COPIES  THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY
; OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE  IS  HEREBY
; TRANSFERRED.
;
; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITHOUT  NOTICE
; AND  SHOULD  NOT  BE  CONSTRUED  AS  A COMMITMENT BY DIGITAL EQUIPMENT
; CORPORATION.
;
; DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE  OR  RELIABILITY  OF ITS
; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.
;

.SBTTL	EDIT HISTORY FOR MSDINT
;+
;
;  000	KPH  06-Sep-84	CREATION - Removed code from MSDVR.MAC
;  001	DBM  01-Jun-85	Include ERLDVR here instead of driver
;-

	DEFORG	MSDVR

	DEFORG	MSDCTL

	DEFORG	MSDINT

	TMPORG	BGBUFR

BGBUFR:	.BLKB	MTULBF		;EXTEND THE BIG BUFFER TO CORRECT SIZE

	TMPORG	BUFCTL,10

	.WORD	1		;SAY THAT 1 BIG BUFFER EXISTS

.SBTTL	MAGTAPE DRIVER DEFINITIONS

STS.MS	==	0/400
		;NO SPECIAL FLAGS

FLG.MS	==	MTAHND
		;MAGTAPE

SIZ.MS	==	5*14.+1
		;DEFAULT FOR "NO WIDTH"

BUF.MS	==	512.
		;DEFAULT BUFFER IS 512. BYTES

; MAGTAPE OPEN/CLOSE ARE NON-RESIDENT

OPN$MS	==	-4+1
CLS$MS	==	-4+1

.SBTTL	MAGTAPE DIRTY (READ/WRITE) AREA

	TMPORG	MSDCTL

MSAQUE::.WORD	0	;REQUEST QUEUE
MSDONQ::.WORD	0	;DONE SERVICE QUEUE
MSUMRQ::.WORD	0	;UMR STALL QUEUE

	TMPORG	MSDINT

MSDINT:	CALLX	INTSAV,R5
	  .WORD	1200		;Actual APR5 value filled in
	  .WORD	0		;Entry for interrupt service filled in

ERL$MS::JMP	@#0		;Entry for error logging filled in

SER$MS::JMP	@#0		;Entry for user level service filled in

TMO$MS::JMP	@#0		;Entry for timeouts filled in

SPC$MS::JMP	@#0		;Entry for special functions filled in

ASN$MS::JMP	@#0		;Entry for assignment filled in

DEA$MS::JMP	@#0		;Entry for deassignment filled in

CON$MS::JMP	@#0		;Entry to continuation service filled in

DNE$MS::JMP	@#0		;Entry to done service filled in

UMR$MS::JMP	@#0		;Entry to UMR service filled in

.SBTTL	MAGTAPE PURE (READ-ONLY) DATA

	TMPORG	MSDTBL

MSAPTR::.WORD	MSAQUE	;POINTER TO THE QUEUE ROOT
	.L3Q	QMSCON	;Level 3 queue bit to set

.END
