	.INCLUDE /CMN:COMMON/
	.INCLUDE /CMN:KERNEL/
TITLE	XMDINT,<ROOT DMC-11 DRIVER>,0A,10-MAY-91,RTW/GPK/FRL/KPH

;
;		COPYRIGHT (c) 1974, 1991 BY
;	DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
;
; THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND  COPIED
; ONLY  IN  ACCORDANCE  WITH  THE  TERMS  OF  SUCH  LICENSE AND WITH THE
; INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE OR  ANY  OTHER
; COPIES  THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY
; OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE  IS  HEREBY
; TRANSFERRED.
;
; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITHOUT  NOTICE
; AND  SHOULD  NOT  BE  CONSTRUED  AS  A COMMITMENT BY DIGITAL EQUIPMENT
; CORPORATION.
;
; DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE  OR  RELIABILITY  OF ITS
; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.
;

.SBTTL	EDIT HISTORY FOR XMDINT.MAC

;+
;  001  GPK  15-May-81	Moved QUEUE management routines to separate module.
;			Removed obsolete driver entry point for NSP.
;
;			[RSTS V9.0]
;  002  FRL  25-Oct-83  Added extended level three queue (L3Q) capability
;
;			[RSTS V9.3]
;  003  KPH  11-Jul-86	Remove reference to BSTALL
;-

	DEFORG	XMDVR

	DEFORG	XMDCTL

	DEFORG	XMDINT

	ORG	XMDINT

INCLUDE	<ERLDVR,QUESUB>							;003

.SBTTL	DMC11 DRIVER DEFINITIONS

; DEFINE 'DDSTS' VALUE FOR DMC11

STS.XM	==	0/400
		;NO SPECIAL FLAGS

; DEFINE FLAGS FOR DMC11

FLG.XM	==	FLGFRC!FLGMOD!DDNFS!DMCHND
		;BYTE ORIENTED
		;ACCEPT MODIFIERS
		;NON-FILE STRUCTURED
		;DMC11

; DEFINE WIDTH

SIZ.XM	==	5*14.+1
		;DEFAULT FOR "NO WIDTH"

; DEFINE DEFAULT BUFFER SIZE

BUF.XM	==	512.
		;DEFAULT BUFFER IS 512. BYTES

.SBTTL	DMC11 DRIVER ROOT (READ ONLY) AREA

	TMPORG	XMDINT

XMDINT::CALLX	INTSAV,R5	;CALL INTERRUPT SAVE
	.WORD	1200		;REQUIRED FOR MAPPING
XMI$CI:	.WORD	0		;ENTRY FOR DMC CONTROL IN INTERRUPTS

	CALLX	INTSVX,R5	;CALL INTERRUPT SAVE
	.WORD	XMDAP5		;REQUIRED FOR MAPPING
XMI$CO:	.WORD	0		;ENTRY FOR DMC CONTROL OUT INTERRUPTS

				; THE FOLLOWING JSR @#0 ARE FILLED IN
				; BY THE LINKER IF THE DMC11 DRIVER
				; IS IN THE KERNEL OR BY A SILUS MERGE
				; IF THE DRIVER IS IN A PHASE

ERL$XM::JMP	@#0		;OFF TO THE REAL ERROR LOGGING...

SER$XM::JMP	@#0		;OFF TO THE REAL DMC11 SERVICE.

OPN$XM::JMP	@#0		;OFF TO THE REAL DMC11 OPEN CODE.

CLS$XM::JMP	@#0		;OFF TO THE REAL DMC11 CLOSE CODE.

TMO$XM::JMP	@#0		;OFF TO THE REAL DMC11 TIME OUT CODE.

SPC$XM::JMP	@#0		;OFF TO THE REAL DMC11 SPECIAL FUNCTION CODE.

SLP$XM::JMP	@#0		;OFF TO THE REAL DMC11 SLEEP CHECK.

ASN$XM::JMP	@#0		;OFF TO THE REAL DMC11 ASSIGN CODE.

DEA$XM::JMP	@#0		;OFF TO THE REAL DMC11 DEASSIGN CODE.

DNE$XM::JMP	@#0		;OFF TO THE REAL LEVEL 3 QUEUE SERVICE.

GLOBAL	<XMDAP5>							;003

.END
