        .INCLUDE /CMN:COMMON/
        .INCLUDE /CMN:KERNEL/
        .INCLUDE /CMN:MTDEF/
TITLE	MUDINT,<TMSCP MAGTAPE DRIVER ROOT CODE>,0B,21-JUN-91,TPT/DBM/FEK

;
;		COPYRIGHT (c) 1974, 1991 BY
;	DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
;
; THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND  COPIED
; ONLY  IN  ACCORDANCE  WITH  THE  TERMS  OF  SUCH  LICENSE AND WITH THE
; INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE OR  ANY  OTHER
; COPIES  THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY
; OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE  IS  HEREBY
; TRANSFERRED.
;
; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITHOUT  NOTICE
; AND  SHOULD  NOT  BE  CONSTRUED  AS  A COMMITMENT BY DIGITAL EQUIPMENT
; CORPORATION.
;
; DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE  OR  RELIABILITY  OF ITS
; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.
;

.SBTTL	EDIT HISTORY FOR MUDINT
;+
;
;  000	TPT  13-Jan-85	CREATION - And it was good...
;  001	DBM  01-Jun-85	Include ERLDVR here instead of driver
;
;			[RSTS/E V10.1]
;  002	FEK  10-Dec-90	Remove CON$MU - replaced with direct CON$IP call
;-

	INCLUDE	ERLDVR							;001

	DEFORG	MUDVR

	DEFORG	MUDCTL

	DEFORG	MUDINT

	TMPORG	BGBUFR

BGBUFR:	.BLKB	MTULBF		;EXTEND THE BIG BUFFER TO CORRECT SIZE

	TMPORG	BUFCTL,10

	.WORD	1		;SAY THAT 1 BIG BUFFER EXISTS

.SBTTL	MAGTAPE DRIVER DEFINITIONS

STS.MU	==	0/400
		;NO SPECIAL FLAGS

FLG.MU	==	MTAHND
		;MAGTAPE

SIZ.MU	==	5*14.+1
		;DEFAULT FOR "NO WIDTH"

BUF.MU	==	512.
		;DEFAULT BUFFER IS 512. BYTES

; MAGTAPE OPEN/CLOSE ARE NON-RESIDENT

OPN$MU	==	-4+1
CLS$MU	==	-4+1

.SBTTL	MAGTAPE DIRTY (READ/WRITE) AREA

	TMPORG	MUDCTL

	TMPORG	MUDINT

MUDINT:	CALLX	INTSAV,R5
	  .WORD	1200		;ACTUAL MCPAP5 VALUE FILLED IN
	  .WORD	0		;ENTRY FOR INTERRUPT SERVICE FILLED IN

ERL$MU::JMP	@#0		;Entry for error logging filled in

SER$MU::JMP	@#0		;Entry for user level service filled in

TMO$MU::JMP	@#0		;Entry for timeouts filled in

SPC$MU::JMP	@#0		;Entry for special functions filled in

ASN$MU::JMP	@#0		;Entry for assignment filled in

DEA$MU::JMP	@#0		;Entry for deassignment filled in

DNE$MU::JMP	@#0		;Entry to done service filled in

UMR$MU::JMP	@#0		;Entry to UMR service filled in


.SBTTL	MAGTAPE PURE (READ-ONLY) DATA

	TMPORG	MUDTBL

MUAPTR::.WORD	0		;POINTER TO THE QUEUE ROOT
	.L3Q	QPHCON		;Level 3 queue bit to set		;002

.END
