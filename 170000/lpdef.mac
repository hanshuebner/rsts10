TITLE	LPDEF,<LINE PRINTER DEFINITIONS>,0A,10-MAY-91,MHB/GW/PRL/JHC

;
;		COPYRIGHT (c) 1974, 1991 BY
;	DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
;
; THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND  COPIED
; ONLY  IN  ACCORDANCE  WITH  THE  TERMS  OF  SUCH  LICENSE AND WITH THE
; INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE OR  ANY  OTHER
; COPIES  THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY
; OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE  IS  HEREBY
; TRANSFERRED.
;
; THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITHOUT  NOTICE
; AND  SHOULD  NOT  BE  CONSTRUED  AS  A COMMITMENT BY DIGITAL EQUIPMENT
; CORPORATION.
;
; DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE  OR  RELIABILITY  OF ITS
; SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.
;

.SBTTL	EDIT HISTORY FOR LPDEF
;+
;
;  000  RRF  06-MAR-81	CREATION - COPIED FROM V7.0-07
;
;  000  PRL  28-Jun-82	CREATION - Copied from V7.2-04
;  001  PRL  28-Jun-82	Add modifier bit assignments
;  002  JHC  23-Sep-82 	Replaced LPTAVT characteristic with
;			LPT8BT characteristic (support of LN01).
;  003	PRL  17-Nov-83	Add LPTPG0,LPTPG1 (32-bit page counter)
;  			Add new DDFLAG bits
;  004	PRL  22-Nov-83	Add new default form length (LPTDFL) byte to DDB
;  005	PRL  11-Jan-84	Add new .WRITE modifier bit LPMNOX (TRUNCATE)
;  006	PRL  15-Jan-84	Add new .WRITE modifier bit LPMNPR (NOPRINT)
;  007	PRL  01-Mar-84	Add new .WRITE modifier bit LPMBIN (BINARY)
;			Make LPTCHR a word instead of byte
;			Add LPTTAB characteristic (no <tab> expand)
;
;-

.SBTTL	LINE PRINTER HARDWARE DEFINITIONS

.DSECT

LPS:	.BLKW		;LINE PRINTER STATUS
LPB:	.BLKW		;LINE PRINTER BUFFER

.SBTTL	LINE PRINTER DDB LAYOUT

.DSECT

DDIDX:	.BLKB		;DRIVER INDEX [IDX.LP]
DDSTS:	.BLKB		;STATUS AND ACCESS CONTROL BYTE
DDJBNO:	.BLKB		;OWNER JOB NUMBER TIMES 2 (0 IF FREE)
DDUNT:	.BLKB		;DEVICE UNIT NUMBER
DDTIME:	.BLKW		;TIME ASSIGNED OR INITED
DDCNT:	.BLKW		;INIT COUNT AND ASSIGNMENT CONTROL
DDFLAG:	.BLKW		;DEVICE DEPENDENT FLAGS
DDBUFC:	.BLKB	BCBSIZ	;BUFFER CHAIN CONTROL AREA (OUTPUT)
DDHORZ:	.BLKB		;HORIZONTAL POSITION
DDHORC:	.BLKB		;CHARACTERS PER LINE+1
DDVERT:	.BLKB		;VERTICAL POSITION
DDVERC:	.BLKB		;FORM LENGTH
LPTCHR:	.BLKW		;PRINTER CHARACTERISTICS			;007
LPTBFG:	.BLKB		;CHECK BUFFERING FLAG
LPTERR:	.BLKB		;LAST ERROR RETURNED
LPTSPC:	.BLKB		;SPECIAL CHARACTER FOR LP11'S
LPTBQC:	.BLKB		;BUFFER QUOTA CHECKING FLAG
LPTPSP:	.BLKB		;PENDING SPACE(S) COUNT
LPTICH:	.BLKB		;INTERRUPT HOLDING CHARACTER
LPTIRB:	.BLKW		;CURRENT IRB/DATA BUFFER INDICATION (LPDVRX)
LPTBBP:	.BLKW		;BRIDGE BLOCK POINTER (LPDVRK)
LPTPG0:	.BLKW		;32-bit page counter (msb)			;003
LPTPG1:	.BLKW		;32-bit page counter (lsb)			;003
LPTDFL:	.BLKB		;default form length				;004
	.BLKB		;(RESERVED)					;004

; BIT ASSIGNMENTS FOR LINE PRINTER DDB STATUS WORDS ARE AS FOLLOWS:

.BSECT	HIGH		;IN DDSTS (AS A WORD)

DDPRVO:	.BLKB	.	;OWNERSHIP REQUIRES PRIV'S
DDRLO:	.BLKB	.	;READ LOCK FOR DEVICE IF SET [1]
DDWLO:	.BLKB	.	;WRITE-LOCK FOR DEVICE IF SET [0]
DDNET:	.BLKB	.	;NETWORK DEVICE
	.BLKB	.	;RESERVED
	.BLKB	.	;RESERVED
	.BLKB	.	;RESERVED
DDSTAT:	.BLKB	.	;PRINTER HUNG

.BSECT	HIGH		;IN DDCNT (AS A WORD)

	.BLKB	.	;RESERVED
	.BLKB	.	;RESERVED
	.BLKB	.	;RESERVED
	.BLKB	.	;RESERVED
	.BLKB	.	;RESERVED
DDCONS:	.BLKB	.	;DEVICE IS THE CONSOLE DEVICE
DDUTIL:	.BLKB	.	;DEVICE ASSIGNED FOR UTILTY SEQUENCE
DDASN:	.BLKB	.	;DEVICE ASSIGNED THROUGH COMMAND

.BSECT			;IN DDFLAG (AS A WORD)

	.BLKB	.	;     +1, RESERVED				;003
	.BLKB	.	;     +2, RESERVED				;003
	.BLKB	.	;     +4, RESERVED				;003
	.BLKB	.	;    +10, RESERVED				;003
	.BLKB	.	;    +20, RESERVED				;003
LPTESC:	.BLKB	.	;    +40, CHANGE <ESC> TO $	(MODE    16.)	;003
LPTNWR:	.BLKB	.	;   +100, NO WRAP LONG LINES	(MODE    32.)	;003
LPTBOK:	.BLKB	.	;   +200, BUFFER CHAIN OWNED			;003
LPTCH0:	.BLKB	.	;   +400, CHANGE "0" INTO "O"	(MODE   128.)
LPTNOX:	.BLKB	.	;  +1000, TRUNCATE LONG LINES	(MODE   256.)
LPTSFT:	.BLKB	.	;  +2000, SOFTWARE FORMATTING	(MODE   512.)
LPTALC:	.BLKB	.	;  +4000, ALLOW LOWER CASE   NOT(MODE  1024.)
LPTOVF:	.BLKB	.	; +10000, SKIP OVER PERFS	(MODE  2048.)
LPTFFT:	.BLKB	.	; +20000, USE <FF> FOR TOF	(MODE  4096.)	;003
LPTNFC:	.BLKB	.	; +40000, NO <FF> ON CLOSE	(MODE  8192.)
LPTCUP:	.BLKB	.	;+100000, UPARROW CTRL CHARS	(MODE 16384.)

.BSECT			;IN LPTCHR (AS A WORD)

LPTRBS:	.BLKB	.	;      +1, ALLOW <BS> FOR BACKSPACE (LA180)
LPTNBS:	.BLKB	.	;      +2, DON'T PROCESS <BS> AS BACKSPACE
LPT8BT: .BLKB	.	;      +4, ALLOW 8-BIT CHARACTERS (LN01)
LPTNPC:	.BLKB	.	;     +10, ALLOW NON-PRINTING CHARACTERS
LPTSFF:	.BLKB	.	;     +20, NO FILL FOR <FF>
LPTEOT:	.BLKB	.	;     +40, ALLOW <EOT>
LPTCRF:	.BLKB	.	;    +100, NO <CR> REQUIRED BEFORE <LF>,<VT>,<FF> (LP11)
LPTSCR:	.BLKB	.	;    +200, IGNORE <CR> IF NEXT IS <LF> (LP11)
LPTTAB:	.BLKB	.	;    +400, No <TAB> expand (LN01)		;007
	.BLKB	.	;   +1000, Reserved				;007
	.BLKB	.	;   +2000, Reserved				;007
	.BLKB	.	;   +4000, Allow lower case (LPTALC)		;007
	.BLKB	.	;  +10000, Reserved				;007
	.BLKB	.	;  +20000, Reserved				;007
	.BLKB	.	;  +40000, Reserved				;007
	.BLKB	.	; +100000, Reserved				;007

.SBTTL	MODIFIERS FOR .WRITE

.BSECT

	.BLKB	.	;     +1, RESERVED
LPMPOP::.BLKB	.	;     +2, PRINT OVER PERFORATIONS
LPMSOC::.BLKB	.	;     +4, STALL UNTIL OUTPUT COMPLETE
LPMCLB::.BLKB	.	;    +10, CLEAR BUFFERS BEFORE TRANSFER
LPMNPR::.BLKB	.	;    +20, NO PRINT				;006
LPMNOX::.BLKB	.	;    +40, TRUNCATE				;005
	.BLKB	.	;   +100, RESERVED
	.BLKB	.	;   +200, RESERVED
	.BLKB	.	;   +400, RESERVED
	.BLKB	.	;  +1000, RESERVED
	.BLKB	.	;  +2000, RESERVED
	.BLKB	.	;  +4000, RESERVED
LPMBIN::.BLKB	.	; +10000, BINARY OUTPUT				;007
LPMNST::.BLKB	.	; +20000, NO STALL
	.BLKB	.	; +40000, RESERVED
	.BLKB	.	;+100000, RESERVED

